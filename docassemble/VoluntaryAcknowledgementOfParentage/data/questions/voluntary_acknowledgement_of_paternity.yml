metadata:
  title: Voluntary acknowledgement of paternity - VAP
  short title: VAP
  comment:  This program helps you prepare an Illinois Voluntary Acknowledgement of Paternity. If necessary, an Illinois Denial of Paternity will also be created. 
  authors:
    - Vivian McNaughton
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALToolbox:phone-number-validation.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
objects:
  - mother: ALIndividual
  - father: ALIndividual
  - child: ALIndividual
  - husband: ALIndividual
  #- witnesses: ALPeopleList
  #- witness_options: DAList
  - user_witness: ALIndividual
  - user_denial_witness: ALIndividual
  - court_list: ALCourtLoader.using(file_name='docassemble.ILAO:data/sources/il_courts.xlsx')
---
code: |
  ilao_easy_form_title = "Voluntary acknowledgement of paternity - VAP"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/voluntary-acknowledgment-parentage-vap"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-VoluntaryAcknowledgementOfParentage'
---
sections:
  - section_intro: Start
  - section_vap: Parents
  - section_mother: "Mother's information"
  - section_father: "Father's information"
  - section_child: "Child's information"
  - section_denial: Previous marriage (optional)
  - section_witnesses: Witnesses
  - section_download: Download
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  set_progress(5)
  how_to_use
  accept_terms
  vap_requirements
  more_vap_requirements
  nav.set_section('section_vap')
  user_gender
  mother.name.first
  father.name.first
  if is_certain == False:
    uncertain_kickout
  if lets_qualify == False:
    qualify_kickout
  if child_born == False:
    not_yet_born
  else:
    if on_certificate == True:
      certificate_kickout
    child.birth_date
  if were_married == False:
    other_marriage
  else:
    married_kickout
  set_progress(20)
  nav.set_section('section_mother')
  mother.birth_date
  mother.address.address
  mother.ssn
  mother.phone_number
  if other_marriage == True:
    if mother.changed_name == True:
      mother.maiden_name
  if mother.born_in_us == True:
    mother.birth_state
  else:
    mother.birth_country
  nav.set_section('section_father')
  set_progress(40)
  father.birth_date
  father.address.address
  father.ssn
  father.phone_number
  if father.born_in_us == True:
    father.birth_state
  else:
    father.birth_country
  nav.set_section('section_child')
  if child_born == True:
    child.name.first
    child.gender
    child.birth_date
    if in_hospital == True:
      hospital_name
    else:
      child.address.address
  nav.set_section('section_denial')
  set_progress(60)
  if other_marriage == True:
    denial_intro
    if user_gender == "mother" and husband_known == True:
      husband.name.first
      marriage_date
      husband.birth_date
      husband.address.address
      husband.ssn
      husband.phone_number
      if husband.born_in_us == True:
        husband.birth_state
      else:
        husband.birth_country 
  nav.set_section('section_witnesses')
  set_progress(80)
  witness_intro
  if user_witness_known == True:
    user_witness.name.first
    user_witness.address.address
    user_witness.phone_number
    if other_marriage == True and user_gender == "mother":
      denial_witness_intro
      if user_denial_witness_known == True:
        user_denial_witness.name.first
        user_denial_witness.address.address
        user_denial_witness.phone_number
  vap_witness_outro
  if other_marriage == True:
    denial_witness_outro
  nav.set_section('section_download')
  set_progress(100)
  get_docs_screen
---
id: welcome
question: |
  Voluntary Acknowledgement of Paternity - VAP
subquestion: |
  Welcome to Illinois Legal Aid Online's **Voluntary Acknowledgement of Paternity - VAP** Easy Form.

  This program helps you create documents to tell the state who a child's biological father is. The form it creates is a Voluntary Acknowledgement of Paternity, also called a VAP.
  
   Once legal paternity is established, the biological father will have all the rights and responsiblities of a legal parent. The father will have the right to have a relationship with the child, but they will also be responsible for supporting the child financially.
  
  The form you create can only be used in Illinois.
field: sees_nav_bar
---
id: instructions
continue button field: how_to_use
question: |
  Instructions
subquestion: |
  You can use this program to create documents to tell the state who a child's biological father is.

  Set aside 10 to 20 minutes to finish this program. You can log in and save your work to return to later. 

  After you download your form, you and the other parent will have to sign the VAP in front of witnesses. Then, you will have to file the VAP with the Illinois Department of Healthcare and Family Services (HFS).
  
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some questions have a question mark in a circle ${ fa_icon("question-circle", color_css="#0DCAF0" ) } that also gives help.
---
template: help_example

subject: |

  **You can expand sections like this to show more information.**

content: |  

  This is an example of help. Click again to hide.
---
id: accept terms
question: |
  Terms of use
subquestion: |
  This program does not provide legal advice. It does not take the place of advice from a lawyer.

  Using this program does not create an attorney-client relationship between you and Illinois Legal Aid Online or its employees.

  ${ collapse_template(get_legal_help) }  

fields:
  - To continue, you must accept the [**terms of use**](https://www.illinoislegalaid.org/about/terms-of-use).: accept
    datatype: checkboxes
    none of the above: False
    minlength: 1
    choices:
      - I accept the terms of use.
    validation messages:
      minlength: |
        You cannot continue unless you agree to the terms of use.
continue button field: accept_terms
---
template: get_legal_help
subject: |
  **What if I need legal advice?**
content: |  
  If you have questions or concerns about your legal problem and want legal advice you should talk to a lawyer.
 
  Use [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help) to find free or low-cost legal services in your area.
---
id: vap requirements
continue button field: vap_requirements
question: |
  Requirements
subquestion: |
  To use a Voluntary Acknowledgement of Paternity, you must be either a:
  
  * Father seeking to acknowledge that you are the parent of a child, or 
  * Mother helping the father of your child to acknowledge paternity.
  
  The VAP is used by the father, but either parent can use this program to create the form. 
  
  To complete this program, you will need to know:

  * The other parent's address, birth date, and birth place, and
  * The child's name and birthdate.
---
id: more vap requirements
continue button field: more_vap_requirements
question: |
  Additional requirements
subquestion: |
  If the child's mother was married to someone else when the child was conceived or born, you need to know:
  
  * The mother's spouse or ex-spouse's address, birth date, and birth place, and
  * The date of their marriage. 
  
  Note: this program can only be used if both biological parents agree and can sign the forms. If the mother's spouse or ex-spouse were married within 300 days of the child's birth, the spouse or ex-spouse must also agree. If the parents do not agree, you must ask a court to establish paternity. 
  
  To learn more, read ILAO's article about [**starting a court case to establish paternity**](https://www.illinoislegalaid.org/legal-information/starting-case-parentage-court).
---
id: user gender
question: |
  Are you the mother or the father of the child?
subquestion: |
  ${ collapse_template(gender_explain) }
field: user_gender
choices:
  - "I am the biological father of the child. I want to declare paternity of this child.": father
  - "I am the mother of the child. I am filling out these forms for the child's biological father to sign.": mother
---
template: gender_explain
subject: |
  **What if the other parent or I are intersex or transgender?**
content: |
  For the purposes of this interview, "mother" refers to the biological parent who gave birth to the child and "father" refers to the biological parent who did not.
---
id: father name
question: |
  % if user_gender == "father":
  What is your name?
  % else:
  What is the name of the biological father of the child?
  % endif
fields:
  - First: father.name.first
  - Middle: father.name.middle
    required: False
  - Last: father.name.last
  - Suffix: father.name.suffix
    required: False
    code: name_suffix()
---
id: certain biological father
question: |
  % if user_gender == "mother":
  Are you certain ${father.name.full(middle='full')} is the biological father of the child?
  % else:
  Are you certain you are the biological father of the child?
  % endif
subquestion: |
  % if user_gender == "mother":
  If there is someone other than ${father.name.full(middle='full')} who could be the biological father, you should select **No**.
  % else:
  If there is someone other than you who could be the biological father, you should select **No**.
  % endif
fields:
  - no label: is_certain
    datatype: yesnoradio
---
id: uncertain kickout
event: uncertain_kickout
question: |
  Sorry
subquestion: |
  You should only use this program if you are certain you know who the child's biological father is.
  
  A paternity test can help you figure out who the biological father of the child is. [**Read more about paternity tests**](https://www.illinoislegalaid.org/legal-information/paternity-test-basics).
buttons:
  - Exit: exit
  - Restart: restart
---
id: married kickout
event: married_kickout
question: |
  Sorry
subquestion: |
  You should not use this program if you are married to or in a civil union with ${other_name}.
  
  If you were married when the child was born or conceived, you should contact the [**Illinois Department of Public Health to correct the child's birth certificate**](https://dph.illinois.gov/topics-services/birth-death-other-records/birth-records/correct-birth-certificate.html).
  
  If you married after the child was born, you should go through the legitimation process. Read more about [**legitimation from the Illinois Department of Public Health**](https://dph.illinois.gov/topics-services/birth-death-other-records/birth-records/legitimation.html).
buttons:
  - Exit: exit
  - Restart: restart
---
id: mother name
question: |
  % if user_gender == "mother":
  What is your name?
  % else:
  Who is the mother of the child?
  % endif
fields:
  - First: mother.name.first
  - Middle: mother.name.middle
    required: False
  - Last: mother.name.last
---
id: any husband knowledge
question: |
  Do you have information about ${other_name}'s spouse or ex-spouse?
subquestion: |
  The Denial of Paternity form can include their name, address, phone number, social security number, and birthplace.
fields:
  - no label: husband_known
    datatype: yesnoradio
---
id: husband name
question: |
  % if user_gender == "mother":
  What is the name of your spouse or ex-spouse?
  % else:
  What is the name of ${other_name}'s spouse or ex-spouse?
  % endif
fields:
  - First: husband.name.first
  - Middle: husband.name.middle
    required: False
  - Last: husband.name.last
  - Suffix: husband.name.suffix
    required: False
    code: name_suffix()
---
id: qualifications intro
question: |
  % if user_gender == "mother":
  Would you like to fill out the forms for ${other_name} to declare paternity of your child?
  % else:
  Would you like to declare paternity of a child?
  % endif
subquestion: |
  % if user_gender == "mother":
  Once legal paternity is established, ${other_name} will have all the rights of a legal parent, but also the responsibilities of a parent. ${other_name} will have the right to have a relationship with the child, but they will also be responsible for supporting the child financially.
  
  A Voluntary Acknowledgement of Paternity is very hard to reverse. A DNA test stating ${other_name} is not the child's parent may not be enough to undo it. You should only use one if you are certain you want ${other_name} to have the rights and responsibilities of a parent.
  % else:
  Once legal paternity is shown, you will have all the rights of a legal parent, but also the responsibilities of a parent. You will have the right to have a relationship with the child, but you will also be responsible for supporting the child financially.
  
  A Voluntary Acknowledgement of Paternity is very hard to reverse. A DNA test stating you are not the child's parent may not be enough to undo it. You should only use one if you are certain you want to have the rights and responsibilities of a parent.
  % endif
fields:
  - no label: lets_qualify
    datatype: yesnoradio
---
id: qualify kickout
event: qualify_kickout
question: |
  Sorry
subquestion: |
  This program is only for someone who wants to declare legal paternity of a child.
buttons:
  - Exit: exit
  - Restart: restart
---
id: child birth
question: |
  Has the child been born yet?
fields:
  - no label: child_born
    datatype: yesnoradio
---
id: not yet born
continue button field: not_yet_born
question: |
  Form not valid until child is born  
subquestion: |
  The Voluntary Acknowledgment of Paternity (VAP) may be completed before your child is born, but is not valid until the child is born and the VAP is filed with the Illinios Department of Healthcare and Family Services (HFS).

  You will need to add information about your child's birth and name to the VAP after they are born. Or, if you would prefer, you can:
  * Have both parents add their information to the birth certificate, or
  * Ask for VAP forms at the hospital when the child is born.
---
depends on:
  - user_gender
  - father.name.first
  - father.name.middle
  - father.name.last
  - father.name.suffix
  - mother.name.first
  - mother.name.middle
  - mother.name.last
  - mother.name.suffix
code: |
  if user_gender == "mother":
    other_name = father.name.full(middle='full')
  else:
    other_name = mother.name.full(middle='full')
---
id: marriage check
question: |
  Were you married to or in a civil union with ${ other_name} when the child was born or conceived?
subquestion: |
  % if user_gender == "mother":
  % if child_born == True:
  If you were married to or in a civil union with ${other_name} when the child was born, they are presumed to be the biological father. 
  
  If the child was born within 300 days of the end of your marriage or civil union with ${other_name}, they are presumed to be the biological father.
  
  You should select **Yes** if:
  
  * You and ${other_name} were married anytime between ${child.birth_date.minus(days=300)} and ${child.birth_date}, and
  * You were not married to anyone else during that time.
  
  If ${other_name} is listed on the birth certificate as the child's father, you do not need to complete this program.
  % else:
  If you are married to or in a civil union with ${other_name} when the child is born, they will be presumed to be the biological father. 
  
  If the child is born within 300 days of the end of your marriage or civil union with ${other_name}, they will be presumed to be the biological father.
  
  If ${other_name} is listed on the birth certificate as the child's father, you do not need to complete this program.
  % endif
  % else:
  % if child_born == True:
  If you were married to or in a civil union with ${ other_name} when the child was born, you are presumed to be the biological father. 
  
  If the child was born within 300 days of the end of your marriage or civil union with ${other_name}, you are presumed to be the biological father.
  
  You should select **Yes** if: 
  
  * You and ${other_name} were married anytime between ${child.birth_date.minus(days=300)} and ${child.birth_date}, and
  * ${other_name} was not married to anyone else during that time.
  
  If your name is listed on the birth certificate as the child's father, you do not need to complete this program.
  % else:
  If you are married to or in a civil union with ${other_name} when the child is born, you will be presumed to be the biological father. 
  
  If the child is born within 300 days of the end of your marriage or civil union with ${other_name}, you will be presumed to be the biological father.
  
  If your name is listed on the birth certificate as the child's father, you do not need to complete this program.
  % endif
  % endif
fields:
  - no label: were_married
    datatype: yesnoradio
---
id: birth certificate
question: |
  % if child_born == True:
  % if user_gender == "mother":
  Is ${ other_name} listed on the child's birth certificate?
  % else:
  Are you listed on the child's birth certificate?
  % endif
  % else:
  % if user_gender == "mother":
  Will ${other_name} be listed on the child's birth certificate?
  % else:
  Will you be listed on the child's birth certificate?
  % endif
  % endif
fields:
  - no label: on_certificate
    datatype: yesnoradio
---
id: certificate kickout
event: certificate_kickout
question: |
  Sorry
subquestion: |
  % if child_born == True:
  If the child's biological father is listed on the birth certificate, there is no need to file a Voluntary Acknowledgement of Paternity.
  % else:
  If the child's biological father will be listed on the birth certificate, there is no need to file a Voluntary Acknowledgement of Paternity.
  % endif
buttons:
  - Exit: exit
  - Restart: restart
---
id: other marriage
question: |
  % if user_gender == "mother":
  Were you married to or in a civil union with someone else when the child was born or conceived?
  % else:
  Was ${other_name} married to or in a civil union with someone else when the child was born or conceived?
  % endif
subquestion: |
  % if child_born == True:
  % if user_gender == "mother":
  If you were married or in a civil union when the child was born, your spouse or ex-spouse must sign a Denial of Paternity form. You will get a completed copy of this form when you finish. It will need to be signed by you and your spouse or ex-spouse.
  
  If the child was born within 300 days of your marriage or civil union with somebody ending, they are presumed to be the biological father. You should select **Yes** if you were married or in a civil union with someone other than ${other_name} anytime between ${child.birth_date.minus(days=300)} and ${child.birth_date}.
  
  % else:
  If ${ other_name} was married or in a civil union when the child was born, the spouse or ex-spouse must fill out and sign a Denial of Paternity form. You will get a completed copy of this form when you finish. It will need to be signed by ${other_name}'s spouse or ex-spouse.
  
  If the child was born within 300 days of ${other_name}'s marriage or civil union with someone, they are presumed to be the biological father. You should select **Yes** if ${other_name} was married or in a civil union with someone other than you anytime between ${child.birth_date.minus(days=300)} and ${child.birth_date}.
  % endif
  % else:
  % if user_gender == "mother":
  If you were married or in a civil union within 300 days of the child's upcoming birth, your spouse or ex-spouse must sign a Denial of Paternity form. You will get a completed copy of this form when you finish, but it will need to be signed by you and your spouse or ex-spouse.
  % else:
  If ${ other_name} was married or in a civil union within 300 days of the child's upcoming birth, the spouse or ex-spouse must fill out and sign a Denial of Paternity form. You will get a completed copy of this form when you finish, but it will need to be signed by ${other_name}'s spouse or ex-spouse.
  % endif
  % endif
  
  ${collapse_template(dissolution_info)}
fields:
  - no label: other_marriage
    datatype: yesnoradio
---
template: dissolution_info
subject: |
  % if user_gender == "mother":
  **What if I have a court judgment saying my ex-spouse is not the father?**
  % else:
  **What if ${other_name} has a court judgment saying their ex-spouse is not the father?**
  % endif

content: |  
  % if user_gender == "father":
  If the marriage or civil union has ended and you have a Judgment for Dissolution of Marriage that states ${other_name}'s ex-spouse is not the father of the child, you can select **No**. However, you will need to include a copy of the Judgment for Dissolution of Marriage with the VAP.
  % else:
  If the marriage or civil union has ended and you have a Judgment for Dissolution of Marriage that states your ex-spouse is not the father of your child, you can select **No**. However, you will need to include a copy of the Judgment for Dissolution of Marriage with the VAP.
  % endif
---
id: father birthdate
question: |
  % if user_gender == "mother":
  What is ${other_name}'s date of birth?
  % else:
  What is your date of birth?
  % endif
fields:
  - Birth date: father.birth_date
    datatype: ThreePartsDate
    #alMax: ${today()}
---
id: mother birthdate
question: |
  % if user_gender == "father":
  What is ${other_name}'s date of birth?
  % else:
  What is your date of birth?
  % endif
fields:
  - Birth date: mother.birth_date
    datatype: ThreePartsDate
---
id: husband birthdate
question: |
  What is ${husband.name.full(middle='full')}'s date of birth?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Birth date: husband.birth_date
    datatype: ThreePartsDate
    required: False
---
id: father address
question: |
  % if user_gender == "mother":
  What is ${other_name}'s address?
  % else:
  What is your address?
  % endif
fields:
  - Street address: father.address.address
    address autocomplete: True
  - Address line 2: father.address.unit
    required: False
  - City: father.address.city
  - State: father.address.state
    code: |
      states_list() 
  - ZIP code: father.address.zip
---
id: mother address
question: |
  % if user_gender == "father":
  What is ${other_name}'s address?
  % else:
  What is your address?
  % endif
fields:
  - Street address: mother.address.address
    address autocomplete: True
  - Address line 2: mother.address.unit
    required: False
  - City: mother.address.city
  - State: mother.address.state
    code: |
      states_list() 
  - ZIP code: mother.address.zip
---
id: husband address
question: |
  What is ${husband.name.full(middle='full')}'s address?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Street address: husband.address.address
    address autocomplete: True
    required: False
  - Address line 2: husband.address.unit
    required: False
  - City: husband.address.city
    required: False
  - State: husband.address.state
    required: False
    code: |
      states_list() 
  - ZIP code: husband.address.zip
    required: False
---
id: father ssn
question: |
  % if user_gender == "mother":
  What is ${other_name}'s social security number?
  % else:
  What is your social security number?
  % endif
subquestion: |
  % if user_gender == "mother":
  This information is optional, but it helps identify ${other_name}.
  % else:
  This information is optional, but it helps identify you.
  % endif
fields:
 - Social security number: father.ssn
   required: False
---
id: mother ssn
question: |
  % if user_gender == "father":
  What is ${other_name}'s social security number?
  % else:
  What is your social security number?
  % endif
subquestion: |
  % if user_gender == "father":
  This information is optional, but it helps identify ${other_name}.
  % else:
  This information is optional, but it helps identify you.
  % endif
fields:
 - Social security number: mother.ssn
   required: False
---
id: husband ssn
question: |
  What is ${husband.name.full(middle='full')}'s social security number?
subquestion: |
  This information is optional, but it helps identify ${husband.name.full(middle='full')}.
fields:
 - Social security number: husband.ssn
   required: False
---
id: father phone
question: |
  % if user_gender == "mother":
  What is ${other_name}'s phone number?
  % else:
  What is your phone number?
  % endif
subquestion: |
  % if user_gender == "mother":
  This information is not required, but it can help the Illinois Department of Healthcare and Family Services contact ${other_name}.
  % else:
  This information is not required, but it can help the Illinois Department of Healthcare and Family Services contact you.
  % endif
fields:
  - Phone number: father.phone_number
    datatype: al_international_phone
    required: False
---
id: mother phone
question: |
  % if user_gender == "father":
  What is ${other_name}'s phone number?
  % else:
  What is your phone number?
  % endif
subquestion: |
  % if user_gender == "mother":
  This information is not required, but it can help the Illinois Department of Healthcare and Family Services contact you.
  % else:
  This information is not required, but it can help the Illinois Department of Healthcare and Family Services contact ${other_name}.
  % endif
fields:
  - Phone number: mother.phone_number
    datatype: al_international_phone
    required: False
---
id: husband phone
question: |
  What is ${husband.name.full(middle='full')}'s phone number?
subquestion: |
  This information is not required, but it can help the Illinois Department of Healthcare and Family Services contact ${husband.name.full(middle='full')}.
fields:
  - Phone number: husband.phone_number
    datatype: al_international_phone
    required: False
---
id: father birth check
question: |
  % if user_gender == "mother":
  Was ${ other_name} born in the United States?
  % else:
  Were you born in the United States?
  % endif
fields:
  - no label: father.born_in_us
    datatype: yesnoradio
---
id: mother birth check
question: |
  % if user_gender == "father":
  Was ${ other_name} born in the United States?
  % else:
  Were you born in the United States?
  % endif
fields:
  - no label: mother.born_in_us
    datatype: yesnoradio
---
id: husband birth check
question: |
  Was ${ husband.name.full(middle='full')} born in the United States?
fields:
  - no label: husband.born_in_us
    datatype: yesnomaybe
---
id: father us birthplace
question: |
  % if user_gender == "mother":
  Where was ${ other_name } born?
  % else:
  Where were you born?
  % endif
fields:
  - City: father.birth_city
  - State: father.birth_state
    code: |
      states_list() 
---
id: mother us birthplace
question: |
  % if user_gender == "father":
  Where was ${ other_name } born?
  % else:
  Where were you born?
  % endif
fields:
  - City: mother.birth_city
  - State: mother.birth_state
    code: |
      states_list() 
---
id: husband us birthplace
question: |
  Where was ${ husband.name.full(middle='full') } born?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - City: husband.birth_city
    required: False
  - State: husband.birth_state
    required: False
    code: |
      states_list() 
---
id: father abroad birthplace
question: |
  % if user_gender == "mother":
  Where was ${ other_name } born?
  % else:
  Where were you born?
  % endif
fields:
  - Street address: father.birth_address
    address autocomplete: False
    required: False
  - Address line 2: father.birth_unit
    required: False
  - City: father.birth_city
  - Country: father.birth_country
---
id: mother abroad birthplace
question: |
  % if user_gender == "father":
  Where was ${ other_name } born?
  % else:
  Where were you born?
  % endif
fields:
  - Street address: mother.birth_address
    address autocomplete: False
    required: False
  - Address line 2: mother.birth_unit
    required: False
  - City: mother.birth_city
  - Country: mother.birth_country
---
id: husband abroad birthplace
question: |
  Where was ${ husband.name.full(middle='full') } born?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Street address: husband.birth_address
    address autocomplete: False
    required: False
  - Address line 2: husband.birth_unit
    required: False
  - City: husband.birth_city
    required: False
  - Country: husband.birth_country
    required: False
---
id: mother name change
question: |
  % if user_gender == "mother":
  Did you change your last name when you got married or entered into a civil union?
  % else:
  Did ${other_name} change their last name when they got married or entered into a civil union?
  % endif
fields:
  - no label: mother.changed_name
    datatype: yesnoradio
---
id: mother maiden name
question: |
  % if user_gender == "mother":
  What is your former last name?
  % else:
  What is ${other_name}'s former last name?
  % endif
fields:
  - Former name: mother.maiden_name
---
id: child name
question: |
  What is the child's full name?
fields:
  - First: child.name.first
  - Middle: child.name.middle
    required: False
  - Last: child.name.last
  - Suffix: child.name.suffix
    required: False
    code: name_suffix()
---
id: child gender
question: |
  What is the gender marker on ${ child.name.full(middle='full')}'s birth certificate?
field: child.gender
choices:
  - Male
  - Female
  - X: X
    help: |
      Illinois allows birth certificates to list X as a gender marker. If you select X on this question, an "X" option will be added to the VAP form.
---
template: gender_x
subject: |
  **What if the gender listed on the birth certificate is X?**
content: | 
  Illinois currently allows birth certificates to list X as a gender marker, but the VAP form has not been updated to reflect this. If you select X on this question, the gender marker on the VAP form will be left blank.
---
id: child birthdate
question: |
  What is ${child.name.full(middle='full')}'s date of birth?
fields:
  - Birth date: child.birth_date
    datatype: ThreePartsDate
---
id: hospital check
question: |
  Was ${child.name.full(middle='full')} born in a hospital?
fields:
  - no label: in_hospital
    datatype: yesnoradio
---
#I have not implemented the county list from other programs because this county is not necessarily in Illinois. I have also used the child.address data to store the child's birthplace location. child.address refers to the child's birthplace.
id: child hospital address
question: |
  Where was ${child.name.full(middle='full')} born?
fields:
  - Hospital name: hospital_name
  - City: child.address.city
  - County: child.address.county
  - State: child.address.state
    code: |
      states_list() 
---
id: child other birthplace address
question: |
  Where was ${child.name.full(middle='full')} born?
fields:
  - Street address: child.address.address
    address autocomplete: True
  - Address line 2: child.address.unit
    required: False
  - City: child.address.city
  - County: child.address.county
  - State: child.address.state
    code: |
      states_list()
---
id: denial intro
continue button field: denial_intro
question: |
  Denial of Paternity
subquestion: |
  % if user_gender == "mother":
  Before you can file your forms, you and your spouse or ex-spouse need to sign a Denial of Paternity form.
  
  You will need to know your spouse or ex-spouse's address, their birth date and place of birth, and the date when you were married. If you do not enter this information now, you will have to add it to the Denial of Paternity form before you mail the forms to the state.
  
  If your spouse or ex-spouse has previously signed a VAP saying they are the parent of the child they cannot sign a Denial of Paternity. If that is the case, you may need to [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help).
  % else:
  Before you can file your forms, ${other_name} and their spouse or ex-spouse need to sign a Denial of Paternity form.
  
  You will need to know ${other_name}'s spouse or ex-spouse's name, address, their birth date and place of birth, and the date when they and ${other_name} were married. If you do not enter this information now, you will have to add it to the Denial of Paternity form before you mail the forms to the state.
  
  If ${other_name}'s spouse or ex-spouse has previously signed a VAP saying they are the parent of the child they cannot sign a Denial of Paternity. If that is the case, you may need to [**Get Legal Help**](https://www.illinoislegalaid.org/get-legal-help).
  % endif
---
id: marriage date
question: |
  % if user_gender == "mother":
  When did you and ${ husband.name.full(middle='full')} marry or enter into a civil union?
  % else:
  When did ${other_name} and ${ husband.name.full(middle='full')} marry or enter into a civil union?
  % endif
subquestion: |
  % if user_gender != "mother":
  If you do not know, leave this question blank.
  % endif
fields:
  - Date: marriage_date
    datatype: ThreePartsDate
    required: False
    #min: ${mother.birth_date.plus(years=10)}
    #max: ${ today() }
---
id: witness intro
continue button field: witness_intro
question: |
  Witness signatures required
subquestion: |
  You will need someone to witness you and ${ other_name } sign the Voluntary Acknowledgement of Paternity form.
  
  % if other_marriage == True:
  % if husband.name.full(middle='full') != "":
  The witness must be an adult age 18 or older but cannot be you, ${other_name}, or ${husband.name.full(middle='full')}.
  % else:
  The witness must be an adult age 18 or older but cannot be you, ${other_name}, or the spouse or ex-spouse signing the Denial of Paternity.
  % endif
  % else:
  The witness must be an adult age 18 or older but cannot be you, or ${other_name}.
  % endif
  
  You do not have to sign at the same time as ${other_name }.

---
template: witness_info
subject: |
  **Who can be a witness?**
content: |
  % if other_marriage == True:
  % if husband.name.full(middle='full') != "":
  The witness must be an adult age 18 or older but cannot be you, ${other_name}, or ${husband.name.full(middle='full')}.
  % else:
  The witness must be an adult age 18 or older but cannot be you, ${other_name}, or the spouse or ex-spouse signing the Denial of Paternity.
  % endif
  % else:
  The witness must be an adult age 18 or older but cannot be you, or ${other_name}.
  % endif
---
id: user witness known
question: |
  Do you know who will witness your signature?
fields:
  - no label: user_witness_known
    datatype: yesnoradio
---
id: user denial witness known
question: |
  Do you know who will witness your signature of the Denial of Paternity?
fields:
  - no label: user_denial_witness_known
    datatype: yesnoradio
---
id: user witness name
question: |
  Who will witness your signature of the Voluntary Acknowledgement of Paternity?
fields:
  - First: user_witness.name.first
  - Middle: user_witness.name.middle
    required: False
  - Last: user_witness.name.last
  - Suffix: user_witness.name.suffix
    required: False
    code: name_suffix()
---
id: user denial witness name
question: |
  Who will witness your signature of the Denial of Paternity?
fields:
  - First: user_denial_witness.name.first
  - Middle: user_denial_witness.name.middle
    required: False
  - Last: user_denial_witness.name.last
  - Suffix: user_denial_witness.name.suffix
    required: False
    code: name_suffix()
---
id: user witness address
question: |
  What is ${user_witness.name.full(middle='full')}'s address?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Street address: user_witness.address.address
    address autocomplete: True
    required: False
  - Address line 2: user_witness.address.unit
    required: False
  - City: user_witness.address.city
    required: False
  - State: user_witness.address.state
    required: False
    code: |
      states_list() 
  - ZIP code: user_witness.address.zip
    required: False
---
id: user denial witness address
question: |
  What is ${user_denial_witness.name.full(middle='full')}'s address?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Street address: user_denial_witness.address.address
    address autocomplete: True
    required: False
  - Address line 2: user_denial_witness.address.unit
    required: False
  - City: user_denial_witness.address.city
    required: False
  - State: user_denial_witness.address.state
    required: False
    code: |
      states_list() 
  - ZIP code: user_denial_witness.address.zip
    required: False
---
id: user witness phone
question: |
  What is ${user_witness.name.full(middle='full')}'s phone number?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Phone number: user_witness.phone_number
    datatype: al_international_phone
    required: False
---
id: user denial witness phone
question: |
  What is ${user_denial_witness.name.full(middle='full')}'s phone number?
subquestion: |
  If you do not know, leave this question blank.
fields:
  - Phone number: user_denial_witness.phone_number
    datatype: al_international_phone
    required: False
---
id: denial witness intro
continue button field: denial_witness_intro
question: |
  Denial of Paternity form witness
subquestion: |
  % if user_gender == "mother":
  You will also need someone to witness you and ${husband.name.full(middle='full')} sign the Denial of Paternity form.
  
  You do not have to sign the document at the same time as ${husband.name.full(middle='full')}.
  % else:
  You will also need someone to witness ${other_name} and ${husband.name.full(middle='full')} sign the Denial of Paternity form.
  
  ${other_name} does not have to sign the document at the same time as ${husband.name.full(middle='full')}.
  % endif
  
  % if husband.name.full(middle='full') != "":
  The witness must be an adult age 18 or older but cannot be you, ${other_name}, or ${husband.name.full(middle='full')}.
  % else:
  The witness must be an adult age 18 or older but cannot be you, ${other_name}, or the spouse or ex-spouse signing the Denial of Paternity.
  % endif
---
id: vap witness outro
continue button field: vap_witness_outro
question: |
  Reminder about VAP signatures
subquestion: |
  ${other_name} will also need someone to witness their signature of the Voluntary Acknowledgement of Paternity. That witness will have to add their name and contact information, then sign and date the form.
---
id: denial witness outro
continue button field: denial_witness_outro
question: |
  Reminder about Denial of Paternity signatures
subquestion: |
  % if user_gender == "mother":
  ${husband.name.full(middle='full')} will also need someone to witness their signature of the Denial of Paternity. That witness will have to add their name and contact information, then sign and date the form.
  % else:
  ${mother.name.full(middle='full')} and ${husband.name.full(middle='full')} will both need someone to witness their signatures of the Denial of Paternity. That witness will have to add their name and contact information, then sign and date the form.
  % endif
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  Your forms are ready. View and download your form below. Click **Make changes** to fix any mistakes.
  
  % if other_marriage == True:
  Read the instructions, page 2 of the VAP, and page 2 of the Denial of Paternity to learn what to do next.
  % else:
  Read the instructions and page 2 of the VAP to learn what to do next.
  % endif
  
  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }

  ${ al_user_bundle.download_list_html() }
 
  &nbsp;

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }
  
  Be sure to read the instructions and other important information on page 2 of your forms. You should make sure that everyone signing the forms understands what they do.
  
  **Note:** This program does not send your form. You will need to do this yourself.

  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} **Sign-in**](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif

 
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=user_info().question_id, easy_form_variable=user_info().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  Voluntary Acknowledgment of Paternity
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [**Illinois Legal Aid Online**](https://www.illinoislegalaid.org)
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions, vap_form, Denial_of_paternity], filename="voluntary_acknowledgment_of_parentage.pdf", title="Download all forms")
  - al_court_bundle: ALDocumentBundle.using(elements=[instructions, vap_form, Denial_of_paternity], filename="voluntary_acknowledgment_of_parentage.pdf", title="Download all forms")
---
attachment:
  - name: Voluntary Acknowledgement of Paternity
    variable name: vap_form[i]
    filename: vap_form
    pdf template file: vap_form.pdf
    skip undefined: True
    editable: False
    fields:
      - "child_name_first": ${ child.name.first }
      - "child_name_middle": ${ child.name.middle if child.name.middle != "" else ""}
      - "child_name_last": ${ child.name.last }
      - "child_name_suffix": ${ child.name.suffix if child.name.suffix != "" else ""}
      - "child_dob": ${ child.birth_date}
      - "child_is_male": ${ True if child.gender == "Male" else False}
      - "child_is_female": ${ True if child.gender == "Female" else False}
      - "child_address_one": |
          % if in_hospital == True:
          ${ hospital_name}
          % else:
          ${child.address.line_one(bare=True )}
          % endif
      - "child_address_two": ${child.address.city + ", " + end_in_county(child.address.county) + ", " + child.address.state}
      - "father_name_first": ${father.name.first}
      - "father_name_middle": ${father.name.middle if father.name.middle != "" else ""}
      - "father_name_last": ${father.name.last}
      - "father_name_suffix": ${father.name.suffix if father.name.suffix != "" else ""}
      - "father_birthplace": |
          % if father.born_in_us == True:
          ${father.birth_city + ", " + father.birth_state}
          % else:
          % if father.birth_unit == "":
          % if father.birth_address != "":
          ${father.birth_address + ", " + father.birth_city + ", " + father.birth_country}
          % else:
          ${father.birth_city + ", " + father.birth_country}
          % endif
          % else:
          ${father.birth_address + ", " + father.birth_unit + ", " + father.birth_city + ", " + father.birth_country}
          % endif
          % endif
      - "father_dob": ${father.birth_date}
      - "father_ssn": ${father.ssn}
      - "father_address_one": ${father.address.line_one(bare=True )}
      - "father_address_two": ${father.address.line_two()}
      - "father_phone": ${phone_number_formatted(father.phone_number)}
      - "mother_name_first": ${mother.name.first}
      - "mother_name_middle": ${mother.name.middle if mother.name.middle != "" else ""}
      - "mother_name_last": ${mother.name.last}
      - "mother_name_maiden": ${mother.maiden_name if mother.changed_name == True else ""}
      - "mother_birthplace": |
          % if mother.born_in_us == True:
          ${mother.birth_city + ", " + mother.birth_state}
          % else:
          % if mother.birth_unit == "":
          % if mother.birth_address != "":
          ${mother.birth_address + ", " + mother.birth_city + ", " + mother.birth_country}
          % else:
          ${mother.birth_city + ", " + mother.birth_country}
          % endif
          % else:
          ${mother.birth_address + ", " + mother.birth_unit + ", " + mother.birth_city + ", " + mother.birth_country}
          % endif
          % endif
      - "mother_dob": ${mother.birth_date}
      - "mother_ssn": ${mother.ssn}
      - "mother_address_one": ${mother.address.line_one(bare=True )}
      - "mother_address_two": ${mother.address.line_two()}
      - "mother_phone": ${phone_number_formatted(mother.phone_number)}
      - "was_married": ${other_marriage}
      - "was_not_married": ${False if other_marriage == True else True}
      - "husband_name": ${husband.name.full(middle='full')}
      - "father_witness_name": ${user_witness.name.full(middle='full') if user_gender == "father" else ""}
      - "father_witness_address": ${user_witness.address.on_one_line(bare=True ) if user_gender == "father" else ""}
      - "father_witness_phone": ${phone_number_formatted(user_witness.phone_number) if user_gender == "father" else ""}
      - "mother_witness_name": ${user_witness.name.full(middle='full') if user_gender == "mother" else ""}
      - "mother_witness_address": ${user_witness.address.on_one_line(bare=True ) if user_gender == "mother" else ""}
      - "mother_witness_phone": ${phone_number_formatted(user_witness.phone_number) if user_gender == "mother" else ""}
      - "x_check": ${ True if child.gender == "X" else False}
      - "x_text": ${ "X" if child.gender == "X" else ""}
---
attachment:
  - name: Denial of paternity
    variable name: Denial_of_paternity[i]
    filename: Denial_of_paternity
    pdf template file: Denial_of_paternity.pdf
    skip undefined: True
    editable: False
    fields:
      - "child_name_first": ${ child.name.first }
      - "child_name_middle": ${ child.name.middle if child.name.middle != "" else ""}
      - "child_name_last": ${ child.name.last }
      - "child_name_suffix": ${ child.name.suffix if child.name.suffix != "" else ""}
      - "child_dob": ${ child.birth_date}
      - "child_is_male": ${ True if child.gender == "Male" else False}
      - "child_is_female": ${ True if child.gender == "Female" else False}
      - "child_address_one": |
          % if in_hospital == True:
          ${ hospital_name}
          % else:
          ${child.address.line_one(bare=True )}
          % endif
      - "child_address_two": ${child.address.city + ", " + end_in_county(child.address.county) + ", " + child.address.state}
      - "husband_name_first": ${husband.name.first}
      - "husband_name_middle": ${husband.name.middle}
      - "husband_name_last": ${husband.name.last}
      - "husband_name_suffix": ${husband.name.suffix if husband.name.suffix != "" else ""}
      - "husband_birthplace": |
          % if husband.born_in_us == True:
          % if husband.birth_city != "" and husband.birth_state != "":
          ${husband.birth_city + ", " + husband.birth_state}
          % else:
          ${ husband.birth_city + husband.birth_state}
          % endif
          % else:
          % if husband.birth_unit == "":
          % if husband.birth_address != "" and husband.birth_city != "" and husband.birth_country != "":
          ${husband.birth_address + ", " + husband.birth_city + ", " + husband.birth_country}
          % endif
          % if husband.birth_address == "" and husband.birth_city != "" and husband.birth_country != "":
          ${husband.birth_city + ", " + husband.birth_country}
          % endif
          % if husband.birth_address == "" and husband.birth_city == "" and husband.birth_country != "":
          ${husband.birth_country}
          % endif
          % if husband.birth_address == "" and husband.birth_city == "" and husband.birth_country == "":
          ${""}
          % endif
          % if husband.birth_address != "" and husband.birth_city != "" and husband.birth_country == "":
          ${husband.birth_address + ", " + husband.birth_city}
          % endif
          % if husband.birth_address != "" and husband.birth_city == "" and husband.birth_country != "":
          ${husband.birth_address + ", " + husband.birth_country}
          % endif
          % else:
           % if husband.birth_address != "" and husband.birth_city != "" and husband.birth_country != "":
          ${husband.birth_address + ", " + husband.birth_unit + ", " + husband.birth_city + ", " + husband.birth_country}
          % endif
          % if husband.birth_address == "" and husband.birth_city != "" and husband.birth_country != "":
          ${husband.birth_unit + ", " + husband.birth_city + ", " + husband.birth_country}
          % endif
          % if husband.birth_address == "" and husband.birth_city == "" and husband.birth_country != "":
          ${husband.birth_unit + ", " + husband.birth_country}
          % endif
          % if husband.birth_address == "" and husband.birth_city == "" and husband.birth_country == "":
          ${husband.birth_unit}
          % endif
          % if husband.birth_address != "" and husband.birth_city != "" and husband.birth_country == "":
          ${husband.birth_address + ", " + husband.birth_unit + ", " + husband.birth_city}
          % endif
          % if husband.birth_address != "" and husband.birth_city == "" and husband.birth_country != "":
          ${husband.birth_address + ", " + husband.birth_unit + ", " + husband.birth_country}
          % endif
          % endif
          % endif
      - "husband_dob": ${husband.birth_date}
      - "husband_ssn": ${husband.ssn}
      - "husband_address_one": ${husband.address.line_one(bare=True )}
      - "husband_address_two": ${husband.address.line_two()}
      - "husband_phone": ${phone_number_formatted(husband.phone_number)}
      - "mother_name_first": ${mother.name.first}
      - "mother_name_middle": ${mother.name.middle if mother.name.middle != "" else ""}
      - "mother_name_last": ${mother.name.last}
      - "mother_name_maiden": ${mother.maiden_name if mother.changed_name == True else ""}
      - "mother_birthplace": |
          % if mother.born_in_us == True:
          ${mother.birth_city + ", " + mother.birth_state}
          % else:
          % if mother.birth_unit == "":
          % if mother.birth_address != "":
          ${mother.birth_address + ", " + mother.birth_city + ", " + mother.birth_country}
          % else:
          ${mother.birth_city + ", " + mother.birth_country}
          % endif
          % else:
          ${mother.birth_address + ", " + mother.birth_unit + ", " + mother.birth_city + ", " + mother.birth_country}
          % endif
          % endif
      - "mother_dob": ${mother.birth_date}
      - "mother_ssn": ${mother.ssn}
      - "mother_address_one": ${mother.address.line_one(bare=True )}
      - "mother_address_two": ${mother.address.line_two()}
      - "mother_phone": ${phone_number_formatted(mother.phone_number)}
      - "marriage_date": ${marriage_date}
      - "was_married": ${other_marriage}
      - "was_not_married": ${False if other_marriage == True else True}
      - "husband_name": ${husband.name.full(middle='full')}
      - "husband_witness_name": ${witnesses[3].name.full(middle='full')}
      - "husband_witness_address": ${witnesses[3].address.on_one_line(bare=True )}
      - "husband_witness_phone": ${phone_number_formatted(witnesses[3].phone_number)}
      - "mother_witness_name": ${user_denial_witness.name.full(middle='full') if user_gender == "mother" else ""}
      - "mother_witness_address": ${user_denial_witness.address.on_one_line(bare=True ) if user_gender == "mother" else ""}
      - "mother_witness_phone": ${phone_number_formatted(user_denial_witness.phone_number) if user_gender == "mother" else ""}
      - "x_check": ${ True if child.gender == "X" else False}
      - "x_text": ${ "X" if child.gender == "X" else ""}
---
attachment:
  - name: instructions
    variable name: instructions[i]
    filename: vap_instructions
    docx template file: vap_instructions.docx
---
objects:
  - vap_form: ALDocument.using(title="Voluntary Acknowledgement of Paternity", filename="vap_form", enabled=True, has_addendum=False)
  - Denial_of_paternity: ALDocument.using(title="Denial of Paternity", filename="Denial_of_paternity", has_addendum=False)
  - instructions: ALDocument.using(title="Instructions", filename="vap_instructions", enabled=True, has_addendum=False)
---
code: |
  Denial_of_paternity.enabled = False
  if other_marriage == True:
    Denial_of_paternity.enabled = True  
---
id: review screen
event: review_answers
question: |
  Review screen
subquestion: |
  Edit your answers below.
review: 
  - Edit: user_gender
    button: |
      **Which parent are you?**
      The ${user_gender}
  - Edit: mother.name.first
    button: |
      % if user_gender == "father":
      **The mother's name:**
      % else:
      **Your name:**
      % endif
      ${mother.name.full(middle='full')}
  - Edit: mother.birth_date
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s date of birth:**
      % else:
      **Your date of birth:**
      % endif
      ${mother.birth_date}
  - Edit: mother.address.address
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s address:**
      % else:
      **Your address:**
      % endif
      ${mother.address.on_one_line(bare=True)}
  - Edit: mother.ssn
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s Social Security number:**
      % else:
      **Your Social Security number:**
      % endif
      ${mother.ssn}
  - Edit: mother.phone_number
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s phone number:**
      % else:
      **Your phone number:**
      % endif
      ${phone_number_formatted(mother.phone_number)}
  - Edit: mother.changed_name
    button: |
      % if user_gender == "mother":
      **Did you change your last name when you got married or entered into a civil union?**
      % else:
      **Did ${other_name} change their last name when they got married or entered into a civil union?**
      % endif
      ${word(yesno(mother.changed_name))}
    show if: other_marriage
  - Edit: mother.maiden_name
    button: |
      % if user_gender == "mother":
      **What is your former last name?**
      % else:
      **What is ${mother.name.full(middle='full')}'s former last name?**
      % endif
      ${mother.maiden_name}
    show if: mother.changed_name
  - Edit: mother.born_in_us
    button: |
      % if user_gender == "father":
      **Was ${mother.name.full(middle='full')} born in the United States?**
      % else:
      **Were you born in the United States?**
      % endif
      ${word(yesno(mother.born_in_us))}
  - Edit: mother.birth_state
    button: |
      % if user_gender == "father":
      **Where was ${ mother.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      ${mother.birth_city}, ${mother.birth_state}
    show if: mother.born_in_us
  - Edit: mother.birth_country
    button: |
      % if user_gender == "father":
      **Where was ${ mother.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      % if mother.birth_unit == "":
      ${mother.birth_address}, ${mother.birth_city}, ${mother.birth_country}
      % else:
      ${mother.birth_address}, ${mother.birth_unit}, ${mother.birth_city}, ${mother.birth_country}
      % endif
    show if: mother.born_in_us == False
  - Edit: father.name.first
    button: |
      % if user_gender == "mother":
      **The father's name:**
      % else:
      **Your name:**
      % endif
      ${father.name.full(middle='full')}
  - Edit: father.birth_date
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s date of birth:**
      % else:
      **Your date of birth:**
      % endif
      ${father.birth_date}
  - Edit: father.address.address
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s address:**
      % else:
      **Your address:**
      % endif
      ${father.address.on_one_line(bare=True)}
  - Edit: father.ssn
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s Social Security number:**
      % else:
      **Your Social Security number:**
      % endif
      ${father.ssn}
  - Edit: father.phone_number
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s phone number:**
      % else:
      **Your phone number:**
      % endif
      ${phone_number_formatted(father.phone_number)}
  - Edit: father.born_in_us
    button: |
      % if user_gender == "mother":
      **Was ${father.name.full(middle='full')} born in the United States?**
      % else:
      **Were you born in the United States?**
      % endif
      ${word(yesno(father.born_in_us))}
  - Edit: father.birth_state
    button: |
      % if user_gender == "mother":
      **Where was ${ father.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      ${father.birth_city}, ${father.birth_state}
    show if: father.born_in_us
  - Edit: father.birth_country
    button: |
      % if user_gender == "mother":
      **Where was ${ father.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      % if father.birth_unit == "":
      ${father.birth_address}, ${father.birth_city}, ${father.birth_country}
      % else:
      ${father.birth_address}, ${father.birth_unit}, ${father.birth_city}, ${father.birth_country}
      % endif
    show if: father.born_in_us == False
  - Edit: child_born
    button: |
      **Has the child been born yet?**
      ${word(yesno(child_born))}
  - Edit: child.birth_date
    button: |
      **${child.name.full(middle='full')}'s birth date:**
      ${child.birth_date}
    show if: child_born
  - Edit: were_married
    button: |
      **Were you married to or in a civil union with ${ other_name} when the child was born or conceived?**
      ${word(yesno(were_married))}
    show if: child_born
  - Edit: other_marriage
    button: |
      % if user_gender == "mother":
      **Were you married to or in a civil union with someone else when the child was born or conceived?**
      % else:
      **Was ${other_name} married to or in a civil union with someone else when the child was born or conceived?**
      % endif
      ${word(yesno(other_marriage))}
    show if: were_married == False
  - Edit: child.name.first
    button: |
      **The child's name:**
      ${child.name.full(middle='full')}
    show if: child_born
  - Edit: child.gender
    button: |
      **${ child.name.full(middle='full')}'s gender on birth certificate:**
      ${child.gender}
    show if: child_born
  - Edit: in_hospital
    button: |
      **Was ${child.name.full(middle='full')} born in a hospital?**
      ${word(yesno(in_hospital))}
    show if: child_born
  - Edit: hospital_name
    button: |
      **${child.name.full(middle='full')}'s birth place:**
      ${hospital_name}, ${child.address.city}, ${end_in_county(child.address.county)}, ${child.address.state}
    show if: child_born == True and in_hospital == True
  - Edit: child.address.address
    button: |
      **${child.name.full(middle='full')}'s birth place:**
      ${child.address.on_one_line(bare=True)}, ${end_in_county(child.address.county)}
    show if: child_born == True and in_hospital == False
  - Edit: husband.name.first
    button: |
      % if user_gender == "mother":
      **Your husband or ex-husband's name:**
      % else:
      **${mother.name.full(middle='full')}'s spouse or ex-spouse's name:**
      % endif
      ${husband.name.full(middle='full')}
    show if: other_marriage
  - Edit: husband.birth_date
    button: |
      **${husband.name.full(middle='full')}'s date of birth:**
      ${husband.birth_date}
    show if: other_marriage
  - Edit: husband.address.address
    button: |
      **${husband.name.full(middle='full')}'s address:**
      ${husband.address.on_one_line(bare=True)}
    show if: other_marriage
  - Edit: husband.ssn
    button: |
      **${husband.name.full(middle='full')}'s Social Security number:**
      ${husband.ssn}
    show if: other_marriage
  - Edit: husband.phone_number
    button: |
      **${husband.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(husband.phone_number)}
    show if: other_marriage
  - Edit: husband.born_in_us
    button: |
      **Was ${husband.name.full(middle='full')} born in the United States?**
      ${word(yesno(husband.born_in_us))}
    show if: other_marriage
  - Edit: husband.birth_state
    button: |
      **${ husband.name.full(middle='full') }'s birthplace:**
      ${husband.birth_city}, ${husband.birth_state}
    show if: other_marriage == True and husband.born_in_us == True
  - Edit: husband.birth_country
    button: |
      **${ husband.name.full(middle='full') }'s birthplace:**
      % if husband.birth_unit == "":
      ${husband.birth_address}, ${husband.birth_city}, ${husband.birth_country}
      % else:
      ${husband.birth_address}, ${husband.birth_unit}, ${husband.birth_city}, ${husband.birth_country}
      % endif
    show if: other_marriage == True and husband.born_in_us == False 
  - Edit: marriage_date
    button: |
      % if user_gender == "mother":
      **Date you and ${husband.name.full(middle='full')} married or entered into a civil union:**
      % else:
      **Date ${mother.name.full(middle='full')} and ${husband.name.full(middle='full')} married or entered into a civil union:**
      % endif
      ${marriage_date}
    show if: other_marriage
  - Edit: user_witness_known
    button: |
      **Do you know who will witness your signature of the VAP?**
      ${word(yesno(user_witness_known))}
  - Edit: user_witness.name.first
    button: |
      **Vap witness's name:**
      ${user_witness.name.full(middle='full')}
    show if: user_witness_known
  - Edit: user_witness.address.address
    button: |
      **${user_witness.name.full(middle='full')}'s address:**
      ${user_witness.address.on_one_line(bare=True)}
    show if: user_witness_known
  - Edit: user_witness.phone_number
    button: |
      **${user_witness.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(user_witness.phone_number)}
    show if: user_witness_known
  - Edit: user_denial_witness_known
    button: |
      **Do you know who will witness your signature of the Denial of Paternity?**
      ${word(yesno(user_denial_witness_known))}
    show if: user_gender == "mother"
  - Edit: user_denial_witness.name.first
    button: |
      **Denial of Paternity witness's name:**
      ${user_denial_witness.name.full(middle='full')}
    show if: user_denial_witness_known == True and user_gender == "mother"
  - Edit: user_denial_witness.address.address
    button: |
      **${user_denial_witness.name.full(middle='full')}'s address:**
      ${user_denial_witness.address.on_one_line(bare=True)}
    show if: user_denial_witness_known == True and user_gender == "mother"
  - Edit: user_denial_witness.phone_number
    button: |
      **${user_denial_witness.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(user_denial_witness.phone_number)}
    show if: user_denial_witness_known == True and user_gender == "mother"
---
need:
  - end_in_county
id: review vap
event: section_vap
question: |
  Parents
subquestion: |
  Edit your answers below.
review:
  - Edit: user_gender
    button: |
      **Which parent are you?**
      The ${user_gender}
  - Edit: mother.name.first
    button: |
      % if user_gender == "father":
      **The mother's name:**
      % else:
      **Your name:**
      % endif
      ${mother.name.full(middle='full')}
  - Edit: father.name.first
    button: |
      % if user_gender == "mother":
      **The father's name:**
      % else:
      **Your name:**
      % endif
      ${father.name.full(middle='full')}
  - Edit: child_born
    button: |
      **Has the child been born yet?**
      ${word(yesno(child_born))}
  - Edit: child.birth_date
    button: |
      **${child.name.full(middle='full')}'s birth date:**
      ${child.birth_date}
    show if: child_born
  - Edit: were_married
    button: |
      **Were you married to or in a civil union with ${ other_name} when the child was born or conceived?**
      ${word(yesno(were_married))}
    show if: child_born
  - Edit: other_marriage
    button: |
      % if user_gender == "mother":
      **Were you married to or in a civil union with someone else when the child was born or conceived?**
      % else:
      **Was ${other_name} married to or in a civil union with someone else when the child was born or conceived?**
      % endif
      ${word(yesno(other_marriage))}
    show if: were_married == False
---
id: review father
event: section_father
question: |
  % if user_gender == "mother":
  Father's information
  % else:
  Your information
  % endif
subquestion: |
  Edit your answers below.
review:
  - Edit: father.name.first
    button: |
      % if user_gender == "mother":
      **The father's name:**
      % else:
      **Your name:**
      % endif
      ${father.name.full(middle='full')}
  - Edit: father.birth_date
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s date of birth:**
      % else:
      **Your date of birth:**
      % endif
      ${father.birth_date}
  - Edit: father.address.address
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s address:**
      % else:
      **Your address:**
      % endif
      ${father.address.on_one_line(bare=True)}
  - Edit: father.ssn
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s Social Security number:**
      % else:
      **Your Social Security number:**
      % endif
      ${father.ssn}
  - Edit: father.phone_number
    button: |
      % if user_gender == "mother":
      **${father.name.full(middle='full')}'s phone number:**
      % else:
      **Your phone number:**
      % endif
      ${phone_number_formatted(father.phone_number)}
  - Edit: father.born_in_us
    button: |
      % if user_gender == "mother":
      **Was ${father.name.full(middle='full')} born in the United States?**
      % else:
      **Were you born in the United States?**
      % endif
      ${word(yesno(father.born_in_us))}
  - Edit: father.birth_state
    button: |
      % if user_gender == "mother":
      **Where was ${ father.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      ${father.birth_city}, ${father.birth_state}
    show if: father.born_in_us
  - Edit: father.birth_country
    button: |
      % if user_gender == "mother":
      **Where was ${ father.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      % if father.birth_unit == "":
      ${father.birth_address}, ${father.birth_city}, ${father.birth_country}
      % else:
      ${father.birth_address}, ${father.birth_unit}, ${father.birth_city}, ${father.birth_country}
      % endif
    show if: father.born_in_us == False
---
id: review mother
event: section_mother
question: |
  % if user_gender == "mother":
  Your information
  % else:
  Mother's information
  % endif
subquestion: |
  Edit your answers below.
review:
  - Edit: mother.name.first
    button: |
      % if user_gender == "father":
      **The mother's name:**
      % else:
      **Your name:**
      % endif
      ${mother.name.full(middle='full')}
  - Edit: mother.birth_date
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s date of birth:**
      % else:
      **Your date of birth:**
      % endif
      ${mother.birth_date}
  - Edit: mother.address.address
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s address:**
      % else:
      **Your address:**
      % endif
      ${mother.address.on_one_line(bare=True)}
  - Edit: mother.ssn
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s Social Security number:**
      % else:
      **Your Social Security number:**
      % endif
      ${mother.ssn}
  - Edit: mother.phone_number
    button: |
      % if user_gender == "father":
      **${mother.name.full(middle='full')}'s phone number:**
      % else:
      **Your phone number:**
      % endif
      ${phone_number_formatted(mother.phone_number)}
  - Edit: mother.changed_name
    button: |
      % if user_gender == "mother":
      **Did you change your last name when you got married or entered into a civil union?**
      % else:
      **Did ${other_name} change their last name when they got married or entered into a civil union?**
      % endif
      ${word(yesno(mother.changed_name))}
    show if: other_marriage
  - Edit: mother.maiden_name
    button: |
      % if user_gender == "mother":
      **What is your former last name?**
      % else:
      **What is ${mother.name.full(middle='full')}'s former last name?**
      % endif
      ${mother.maiden_name}
    show if: mother.changed_name
  - Edit: mother.born_in_us
    button: |
      % if user_gender == "father":
      **Was ${mother.name.full(middle='full')} born in the United States?**
      % else:
      **Were you born in the United States?**
      % endif
      ${word(yesno(mother.born_in_us))}
  - Edit: mother.birth_state
    button: |
      % if user_gender == "father":
      **Where was ${ mother.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      ${mother.birth_city}, ${mother.birth_state}
    show if: mother.born_in_us
  - Edit: mother.birth_country
    button: |
      % if user_gender == "father":
      **Where was ${ mother.name.full(middle='full') } born?**
      % else:
      **Where were you born?**
      % endif
      % if mother.birth_unit == "":
      ${mother.birth_address}, ${mother.birth_city}, ${mother.birth_country}
      % else:
      ${mother.birth_address}, ${mother.birth_unit}, ${mother.birth_city}, ${mother.birth_country}
      % endif
    show if: mother.born_in_us == False
  - Edit: other_marriage
    button: |
      % if user_gender == "mother":
      **Were you married to or in a civil union with someone else when the child was born or conceived?**
      % else:
      **Was ${other_name} married to or in a civil union with someone else when the child was born or conceived?**
      % endif
      ${word(yesno(other_marriage))}
    show if: were_married == False
---
need:
  - end_in_county
id: review child
event: section_child
question: |
  Child's information
subquestion: |
  Edit your answers below.
review:
  - Edit: child_born
    button: |
      **Has the child been born yet?**
      ${word(yesno(child_born))}
  - Edit: child.name.first
    button: |
      **The child's name:**
      ${child.name.full(middle='full')}
    show if: child_born
  - Edit: child.gender
    button: |
      **${ child.name.full(middle='full')}'s gender on birth certificate:**
      ${child.gender}
    show if: child_born
  - Edit: child.birth_date
    button: |
      **${child.name.full(middle='full')}'s birth date:**
      ${child.birth_date}
    show if: child_born
  - Edit: in_hospital
    button: |
      **Was ${child.name.full(middle='full')} born in a hospital?**
      ${word(yesno(in_hospital))}
    show if: child_born
  - Edit: hospital_name
    button: |
      **${child.name.full(middle='full')}'s birth place:**
      ${hospital_name}, ${child.address.city}, ${end_in_county(child.address.county)}, ${child.address.state}
    show if: child_born == True and in_hospital == True
  - Edit: child.address.address
    button: |
      **${child.name.full(middle='full')}'s birth place:**
      ${child.address.on_one_line(bare=True)}, ${end_in_county(child.address.county)}
    show if: child_born == True and in_hospital == False
---
id: review denial
event: section_denial
question: |
  Previous marriage (optional)
subquestion: |
  Edit your answers below.
review:
  - Edit: other_marriage
    button: |
      % if user_gender == "mother":
      **Were you married to or in a civil union with someone else when the child was born or conceived?**
      % else:
      **Was ${other_name} married to or in a civil union with someone else when the child was born or conceived?**
      % endif
      ${word(yesno(other_marriage))}
    show if: were_married == False
  - Edit: husband.name.first
    button: |
      % if user_gender == "mother":
      **Your spouse or ex-spouse's name:**
      % else:
      **${mother.name.full(middle='full')}'s spouse or ex-spouse's name:**
      % endif
      ${husband.name.full(middle='full')}
    show if: other_marriage
  - Edit: husband.birth_date
    button: |
      **${husband.name.full(middle='full')}'s date of birth:**
      ${husband.birth_date}
    show if: other_marriage
  - Edit: husband.address.address
    button: |
      **${husband.name.full(middle='full')}'s address:**
      ${husband.address.on_one_line(bare=True)}
    show if: other_marriage
  - Edit: husband.ssn
    button: |
      **${husband.name.full(middle='full')}'s Social Security number:**
      ${husband.ssn}
    show if: other_marriage
  - Edit: husband.phone_number
    button: |
      **${husband.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(husband.phone_number)}
    show if: other_marriage
  - Edit: husband.born_in_us
    button: |
      **Was ${husband.name.full(middle='full')} born in the United States?**
      ${word(yesno(husband.born_in_us))}
    show if: other_marriage
  - Edit: husband.birth_state
    button: |
      **${ husband.name.full(middle='full') }'s birthplace:**
      ${husband.birth_city}, ${husband.birth_state}
    show if: other_marriage == True and husband.born_in_us == True
  - Edit: husband.birth_country
    button: |
      **${ husband.name.full(middle='full') }'s birthplace:**
      % if husband.birth_unit == "":
      ${husband.birth_address}, ${husband.birth_city}, ${husband.birth_country}
      % else:
      ${husband.birth_address}, ${husband.birth_unit}, ${husband.birth_city}, ${husband.birth_country}
      % endif
    show if: other_marriage == True and husband.born_in_us == False 
  - Edit: marriage_date
    button: |
      % if user_gender == "mother":
      **Date you and ${husband.name.full(middle='full')} married or entered into a civil union:**
      % else:
      **Date ${mother.name.full(middle='full')} and ${husband.name.full(middle='full')} married or entered into a civil union:**
      % endif
      ${marriage_date}
    show if: other_marriage
---
id: review witnesses
event: section_witnesses
question: |
  Witnesses
subquestion: |
  Edit your answers below.
review:
  - Edit: user_witness_known
    button: |
      **Do you know who will witness your signature of the VAP?**
      ${word(yesno(user_witness_known))}
  - Edit: user_witness.name.first
    button: |
      **VAP witness's name:**
      ${user_witness.name.full(middle='full')}
    show if: user_witness_known
  - Edit: user_witness.address.address
    button: |
      **${user_witness.name.full(middle='full')}'s address:**
      ${user_witness.address.on_one_line(bare=True)}
    show if: user_witness_known
  - Edit: user_witness.phone_number
    button: |
      **${user_witness.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(user_witness.phone_number)}
    show if: user_witness_known
  - Edit: user_denial_witness_known
    button: |
      **Do you know who will witness your signature of the Denial of Paternity?**
      ${word(yesno(user_denial_witness_known))}
    show if: user_gender == "mother"
  - Edit: user_denial_witness.name.first
    button: |
      **Denial of Paternity witness's name:**
      ${user_denial_witness.name.full(middle='full')}
    show if: user_denial_witness_known == True and user_gender == "mother"
  - Edit: user_denial_witness.address.address
    button: |
      **${user_denial_witness.name.full(middle='full')}'s address:**
      ${user_denial_witness.address.on_one_line(bare=True)}
    show if: user_denial_witness_known == True and user_gender == "mother"
  - Edit: user_denial_witness.phone_number
    button: |
      **${user_denial_witness.name.full(middle='full')}'s phone number:**
      ${phone_number_formatted(user_denial_witness.phone_number)}
    show if: user_denial_witness_known == True and user_gender == "mother"